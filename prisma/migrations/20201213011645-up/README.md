# Migration `20201213011645-up`

This migration has been generated by cipriano98 at 12/12/2020, 10:16:45 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Vacancy" DROP CONSTRAINT "Vacancy_userid_fkey"

CREATE TABLE "_UserToVacancy" (
    "A" INTEGER NOT NULL,
    "B" INTEGER NOT NULL
)

CREATE UNIQUE INDEX "_UserToVacancy_AB_unique" ON "_UserToVacancy"("A", "B")

CREATE INDEX "_UserToVacancy_B_index" ON "_UserToVacancy"("B")

ALTER TABLE "_UserToVacancy" ADD FOREIGN KEY("A")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "_UserToVacancy" ADD FOREIGN KEY("B")REFERENCES "Vacancy"("codeVacancy") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201211205200-up..20201213011645-up
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
     provider = "postgresql"
-    url = "***"
+    url = "***"
 }
 model Profile {
     id String @id @default(uuid())
@@ -107,10 +107,11 @@
     professionalprofile String?
     intendedsalary      Float?
-    userid       Int            @unique
-    User         User           @relation(fields: [userid], references: [id])
+    userid Int  @unique
+    User   User @relation(fields: [userid], references: [id])
+
     academicdata AcademicData[]
     experiences  Experiences[]
     createdat DateTime @default(now())
@@ -147,13 +148,11 @@
     updatedat DateTime @updatedAt
 }
 model Vacancy {
-    codeVacancy Int @id @default(autoincrement())
-
+    codeVacancy Int    @id @default(autoincrement())
     userid      Int
-    user        User    @relation(fields: [userid], references: [id])
-    // interested  User[]
+    Interested  User[]
     office      String
     logo        String?
     description String?
```


